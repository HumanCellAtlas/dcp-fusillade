{% extends "base.html" %}
{% block title %}
    <h2>DCP Fusillade: Link a User to Group(s)</h2>
    
    <p>
    This form should be used by DCP operators to add DCP users (i.e., service accounts) to DCP groups.
    This is required for access control in the Human Cell Atlas (HCA) project.
    </p>
    
    <p>
    Enter the email address for a user (service account), and check the boxes of any groups to which
    the user should be added. If a user is already in a group, and that group's checkbox is unchecked,
    they will not be removed from that group.
    </p>
    
    <p>Submitting this form will open a pull request in the
    <a href="https://allspark.dev.data.humancellatlas.org/HumanCellAtlas/dcp-fusillade">dcp-fusillade</a> 
    repository on <a href="https://allspark.dev.data.humancellatlas.org">Allspark</a>.
    Once the pull request is approved, the changes will be implemented by the continuous
    integration/deployment system.
    </p>
{% endblock %}
{% block content %}
    <div class="col-md-4 order-md-2">

        <form method="POST" action="/submit">

            <label for="email">
                <p class="lead">User/Service Account Email:</p>
                <input name="email" id="input-email" class="form-control" type="email"
                required="" placeholder="service-account@domain.com" size="120">
                <div class="invalid-feedback">
                A user/service acount email is required.
                </div>
            </label>

            <hr class="mb-6">

            <label for="groups">
                <p class="lead">Add User to the Following Groups:</p>

            {% for group in groups %}
                <div id="checkbox-div-{{group}}" class="custom-control custom-checkbox">
                    <input name="{{group}}" type="checkbox" class="custom-control-input check_button" id="checkbox-{{group}}">
                    <label class="custom-control-label" data-checked="false" for="checkbox-{{group}}">{{group}}</label>
                </div>
                <br />
            {% endfor %}

            <br />

            <button class="btn btn-primary btn-lg btn-block" type="submit">Submit Request</button>

        </form>

    </div>
{% endblock %}
